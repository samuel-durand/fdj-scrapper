# Configuration Nixpacks pour Railways - Backend uniquement
# Ce fichier indique à Railways comment builder et démarrer l'API backend

[phases.setup]
nixPkgs = ["nodejs-18_x"]

[phases.install]
# Désactiver la détection automatique de production pour npm
# Utiliser --omit=dev explicitement au lieu de laisser npm le détecter automatiquement
cmds = ["NPM_CONFIG_PRODUCTION=false npm ci --omit=dev"]

# Pas de phase build nécessaire pour le backend Node.js

[start]
cmd = "npm start"

[variables]
# NODE_ENV sera défini dans Railway Dashboard, pas ici pour éviter les conflits avec npm
API_ONLY = "true"

